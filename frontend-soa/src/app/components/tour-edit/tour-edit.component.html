<div class="edit-tour-page">
  <div class="page-header">
    <h2>Izmeni turu</h2>
    <button class="cancel-btn" (click)="onCancel()">❌ Otkaži</button>
  </div>

  <div *ngIf="loading && !tourData.naziv" class="loading">
    Učitavanje ture...
  </div>

  <form *ngIf="!loading || tourData.naziv" (ngSubmit)="onSubmit()" class="tour-form">
    <div class="form-group">
      <label for="naziv">Naziv ture *</label>
      <input 
        id="naziv" 
        type="text" 
        [(ngModel)]="tourData.naziv" 
        name="naziv"
        placeholder="Unesite naziv ture..."
        class="form-input"
        [class.error]="isCharacterLimitExceeded(tourData.naziv, 255)"
        maxlength="255"
        required
      />
      <div class="character-count" [class.error]="isCharacterLimitExceeded(tourData.naziv, 255)">
        {{ getCharacterCount(tourData.naziv, 255) }}
      </div>
    </div>

    <div class="form-group">
      <label for="opis">Opis ture *</label>
      <textarea 
        id="opis" 
        [(ngModel)]="tourData.opis" 
        name="opis"
        placeholder="Unesite detaljan opis ture..."
        class="form-textarea"
        [class.error]="isCharacterLimitExceeded(tourData.opis, 2000)"
        maxlength="2000"
        rows="6"
        required
      ></textarea>
      <div class="character-count" [class.error]="isCharacterLimitExceeded(tourData.opis, 2000)">
        {{ getCharacterCount(tourData.opis, 2000) }}
      </div>
    </div>

    <div class="form-group">
      <label for="tezina">Težina ture *</label>
      <select 
        id="tezina" 
        [(ngModel)]="tourData.tezina" 
        name="tezina"
        class="form-select"
        required
      >
        <option *ngFor="let diff of difficulties" [value]="diff.value">
          {{ diff.label }}
        </option>
      </select>
    </div>

    <div class="form-group">
      <label for="tagovi">Tagovi</label>
      <input 
        id="tagovi" 
        type="text" 
        [(ngModel)]="tourData.tagovi" 
        name="tagovi"
        placeholder="Unesite tagove odvojene zarezom (npr. planina,nature,hiking)..."
        class="form-input"
        [class.error]="isCharacterLimitExceeded(tourData.tagovi || '', 500)"
        maxlength="500"
      />
      <div class="character-count" [class.error]="isCharacterLimitExceeded(tourData.tagovi || '', 500)">
        {{ getCharacterCount(tourData.tagovi || '', 500) }}
      </div>
      <div class="help-text">
        Tagovi pomažu korisnicima da lakše pronađu vašu turu. Koristite kratke, opisne reči odvojene zarezom.
      </div>
    </div>

    <div *ngIf="error" class="error-message">
      {{ error }}
    </div>

    <div class="form-actions">
      <button type="button" class="btn-secondary" (click)="onCancel()" [disabled]="loading">
        Otkaži
      </button>
      <button type="submit" class="btn-primary" [disabled]="loading || !validateForm()">
        <span *ngIf="loading">Ažuriranje...</span>
        <span *ngIf="!loading">Ažuriraj turu</span>
      </button>
    </div>
  </form>
</div>

